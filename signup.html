<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup Page</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://www-s3-live.kent.edu/s3fs-root/s3fs-public/styles/normal_banner/public/100_2101_edit.jpg?VersionId=JrPr8NeuA8vPaUhWoT4LkwgRHcaM2gTy&h=e6f36a9c&itok=Mv7dSNxg') no-repeat center center fixed;
            background-size: cover;
            filter: blur(8px); /* Apply blur effect */
            z-index: -1; /* Place behind the content */
        }

        .signup-container {
            background: rgba(255, 255, 255, 0.9); /* Slightly opaque white background */
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 400px;
        }

        .error-message {
            color: red;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            position: absolute;
        }

        .form-group {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .valid-feedback, .invalid-feedback {
            display: none;
        }

        .is-valid ~ .valid-feedback {
            display: block;
        }

        .is-invalid ~ .invalid-feedback {
            display: block;
        }

        .btn-submit {
            background-color: #f44336; /* Red color */
            color: #ffffff;
            border-color: #f44336;
            transition: background-color 0.3s, color 0.3s;
        }

        .btn-submit:hover {
            background-color: #c62828;
            color: #ffffff;
            border-color: #c62828;
        }
    </style>
</head>
<body>
    <div class="signup-container">
        <h2 class="text-center">Sign Up</h2>
        <form id="signup-form" novalidate>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" class="form-control" id="email" placeholder="Enter email" required>
                <div class="invalid-feedback">Email is required and should include 'admin' for Admin signup.</div>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" id="password" placeholder="Enter password" required>
                <div class="invalid-feedback">Password must be at least 8 characters long and contain both letters and numbers.</div>
            </div>
            <div class="form-group">
                <label for="confirm-password">Confirm Password</label>
                <input type="password" class="form-control" id="confirm-password" placeholder="Confirm password" required>
                <div class="invalid-feedback">Passwords do not match.</div>
            </div>
            <div id="extra-fields"></div>
            <button type="submit" class="btn btn-submit btn-block">Sign Up</button>
        </form>
    </div>

    <!-- Scripts -->
    <script>
        function isAdmin(email) {
            return email.includes('admin');
        }

        function validatePassword() {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            const passwordValid = password.length >= 8 && /[a-zA-Z]/.test(password) && /\d/.test(password);
            const passwordsMatch = password === confirmPassword;

            document.getElementById('password').classList.toggle('is-invalid', !passwordValid);
            document.getElementById('password').classList.toggle('is-valid', passwordValid);

            document.getElementById('confirm-password').classList.toggle('is-invalid', !passwordsMatch);
            document.getElementById('confirm-password').classList.toggle('is-valid', passwordsMatch);

            return passwordValid && passwordsMatch;
        }

        function validateDateOfBirth(dob) {
            const birthDate = new Date(dob);
            const today = new Date();
            const age = today.getFullYear() - birthDate.getFullYear();
            const isOldEnough = age > 18 || (age === 18 && today.getMonth() >= birthDate.getMonth() && today.getDate() >= birthDate.getDate());

            return isOldEnough;
        }

        function validateForm() {
            const email = document.getElementById('email').value;
            const emailIsValid = email !== '';
            const passwordIsValid = validatePassword();

            let dobIsValid = true;
            const dobInput = document.getElementById('dob');
            if (dobInput) {
                dobIsValid = validateDateOfBirth(dobInput.value);
                dobInput.classList.toggle('is-invalid', !dobIsValid);
                dobInput.classList.toggle('is-valid', dobIsValid);
            }

            document.getElementById('email').classList.toggle('is-invalid', !emailIsValid);
            document.getElementById('email').classList.toggle('is-valid', emailIsValid);

            return emailIsValid && passwordIsValid && dobIsValid;
        }

        document.getElementById('signup-form').addEventListener('submit', function (event) {
            event.preventDefault();
            if (validateForm()) {
                const email = document.getElementById('email').value;
                if (isAdmin(email)) {
                    window.location.href = 'admin.html';
                } else {
                    window.location.href = 'userLogin.html';
                }
            }
        });

            document.getElementById('email').addEventListener('input', function () {
            const email = this.value;
            const extraFieldsContainer = document.getElementById('extra-fields');
            extraFieldsContainer.innerHTML = '';

            if (isAdmin(email)) {
                extraFieldsContainer.innerHTML = `
                    <div class="form-group">
                        <label for="employee-id">Employee ID</label>
                        <input type="text" class="form-control" id="employee-id" placeholder="Enter Employee ID" required>
                        <div class="invalid-feedback">Employee ID is required.</div>
                    </div>
                    <div class="form-group">
                        <label for="dob">Date of Birth</label>
                        <input type="date" class="form-control" id="dob" placeholder="Enter Date of Birth" required>
                        <div class="invalid-feedback">You must be at least 18 years old.</div>
                    </div>
                `;
            } else {
                extraFieldsContainer.innerHTML = `
                    <div class="form-group">
                        <label for="role">Role</label>
                        <select class="form-control" id="role" required>
                            <option value="">Select Role</option>
                            <option value="student">Student</option>
                            <option value="professor">Professor</option>
                            <option value="staff">Staff</option>
                        </select>
                        <div class="invalid-feedback">Role is required.</div>
                    </div>
                `;

                    document.getElementById('role').addEventListener('change', function () {
                    const role = this.value;
                    const extraFieldsContainer = document.getElementById('extra-fields');
                    if (role === 'student') {
                        extraFieldsContainer.innerHTML += `
                            <div class="form-group">
                                <label for="registration-number">Registration Number</label>
                                <input type="text" class="form-control" id="registration-number" placeholder="Enter Registration Number" required>
                                <div class="invalid-feedback">Registration Number is required.</div>
                            </div>
                             <div class="form-group">
                                <label for="dob">Date of Birth</label>
                                <input type="date" class="form-control" id="dob" placeholder="Enter Date of Birth" required>
                                <div class="invalid-feedback">You must be at least 18 years old.</div>
                            </div>
                        `;
                    } else if (role === 'professor' || role === 'staff') {
                        extraFieldsContainer.innerHTML += `
                            <div class="form-group">
                                <label for="employee-id">Employee ID</label>
                                <input type="text" class="form-control" id="employee-id" placeholder="Enter Employee ID" required>
                                <div class="invalid-feedback">Employee ID is required.</div>
                            </div>
                            <div class="form-group">
                                <label for="dob">Date of Birth</label>
                                <input type="date" class="form-control" id="dob" placeholder="Enter Date of Birth" required>
                                <div class="invalid-feedback">You must be at least 18 years old.</div>
                            </div>
                        `;
                    }
                });
            }
        });

        document.getElementById('signup-form').addEventListener('input', function () {
           
            validateForm();
        });

        document.getElementById('password').addEventListener('input', validatePassword);
        document.getElementById('confirm-password').addEventListener('input', validatePassword);
    </script>
</body>
</html>
